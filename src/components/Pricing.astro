---
const oneTime = [
  {
    key: 'chatbot_basic',
    name: 'Chatbot Basic',
    price: 120,
    desc: 'Chatbot para web o WhatsApp. Responde consultas, captura datos y los registra en Google Sheets automáticamente.',
    features: ['Integración web o WhatsApp', 'Captura de leads y formularios', 'Registro en Google Sheets', 'Respuestas automáticas 24/7'],
    link: 'https://www.paypal.com/ncp/payment/YDXC7PD5SGK32',
    highlight: false,
  },
  {
    key: 'chatbot_pro',
    name: 'Chatbot Pro',
    price: 240,
    desc: 'Chatbot con múltiples flujos, lógica avanzada e integraciones complejas. Para negocios con necesidades más exigentes.',
    features: ['Todo lo de Basic', 'Flujos de conversación avanzados', 'Múltiples integraciones', 'Lógica condicional compleja'],
    link: 'https://www.paypal.com/ncp/payment/VB78BXZUL6NFJ',
    highlight: false,
  },
  {
    key: 'automation_basic',
    name: 'Automation Basic',
    price: 180,
    desc: 'Una automatización simple: publicaciones en redes, notificaciones, mover datos entre sistemas.',
    features: ['1 flujo de automatización', 'Conexión entre 2 sistemas', 'Disparadores automáticos', 'Notificaciones en tiempo real'],
    link: 'https://www.paypal.com/ncp/payment/KBZUMEE5983LQ',
    highlight: false,
  },
  {
    key: 'automation_medium',
    name: 'Automation Medium',
    price: 320,
    desc: 'Varias automatizaciones conectadas. Ideal cuando necesitás que múltiples sistemas trabajen juntos.',
    features: ['Hasta 3 flujos conectados', 'Integraciones múltiples', 'Panel de monitoreo', 'Soporte en puesta en marcha'],
    link: 'https://www.paypal.com/ncp/payment/W5F2RCMA2LCPY',
    highlight: true,
  },
  {
    key: 'automation_advanced',
    name: 'Automation Advanced',
    price: 550,
    desc: 'Sistema complejo con múltiples workflows, lógica avanzada y alto volumen de operaciones.',
    features: ['Workflows ilimitados', 'Arquitectura a medida', 'Alta disponibilidad', 'Documentación técnica completa'],
    link: 'https://www.paypal.com/ncp/payment/4TZF9BB8A4ERW',
    highlight: false,
  },
];

const subscriptions = [
  {
    name: 'Infraestructura',
    price: 5,
    period: 'mes',
    desc: 'Servidor dedicado para mantener tu sistema activo. Requerido para todos los planes.',
    required: true,
    link: 'https://www.paypal.com/webapps/billing/plans/subscribe?plan_id=P-50T83312XJ282963YNGMBTNQ',
  },
  {
    name: 'Mantenimiento',
    price: 30,
    period: 'mes',
    desc: 'Soporte técnico mensual, actualizaciones y monitoreo proactivo de tu sistema.',
    required: false,
    link: 'https://www.paypal.com/webapps/billing/plans/subscribe?plan_id=P-2TJ0782350407071VNGMBQXA',
  },
];
---

<section id="planes" class="relative section-padding">
  <div class="orb hero-orb-2 w-[500px] h-[500px] -right-48 top-1/4"></div>

  <div class="max-w-7xl mx-auto">

    <!-- Header -->
    <div class="text-center mb-20">
      <span class="reveal inline-block px-4 py-1.5 rounded-full text-xs font-semibold uppercase tracking-widest text-accent bg-accent/10 border border-accent/20 mb-6">
        Planes y Precios
      </span>
      <h2 class="reveal font-display font-bold text-3xl sm:text-4xl md:text-5xl text-white mb-6">
        Inversión <span class="gradient-text">clara y directa</span>
      </h2>
      <p class="reveal reveal-delay-1 text-lg text-slate-400 max-w-2xl mx-auto">
        Precios fijos, sin sorpresas. Pago único por la implementación más suscripción de infraestructura mensual.
      </p>
    </div>

    <!-- One-time plans grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16">
      {oneTime.map((plan, i) => (
        <div class={`reveal reveal-delay-${(i % 3) + 1} relative glass-card p-8 flex flex-col transition-all duration-500 hover:-translate-y-2 ${plan.highlight ? 'glow-border border-primary/60 bg-primary/5' : 'glow-border hover:bg-dark-600/60'}`}>
          {plan.highlight && (
            <div class="absolute -top-3 left-1/2 -translate-x-1/2">
              <span class="px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest bg-gradient-to-r from-primary to-accent text-white shadow-lg">
                Más popular
              </span>
            </div>
          )}

          <div class="mb-6">
            <h3 class="font-display font-bold text-xl text-white mb-2">{plan.name}</h3>
            <p class="text-slate-400 text-sm leading-relaxed">{plan.desc}</p>
          </div>

          <div class="mb-6">
            <span class="font-display font-black text-4xl text-white">USD {plan.price}</span>
            <span class="text-slate-400 text-sm ml-2">pago único</span>
          </div>

          <ul class="space-y-3 mb-8 flex-1">
            {plan.features.map(f => (
              <li class="flex items-start gap-3 text-sm text-slate-300">
                <svg class="w-4 h-4 text-primary-light mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"/>
                </svg>
                {f}
              </li>
            ))}
          </ul>

          <a
            href={plan.link}
            target="_blank"
            rel="noopener"
            class={`w-full text-center py-3 px-6 rounded-xl font-semibold text-sm transition-all duration-300 ${plan.highlight ? 'bg-gradient-to-r from-primary to-accent text-white hover:shadow-[0_0_24px_rgba(124,58,237,0.5)] hover:opacity-90' : 'border border-primary/40 text-primary-light hover:bg-primary/10 hover:border-primary'}`}
          >
            Contratar — USD {plan.price}
          </a>
        </div>
      ))}
    </div>

    <!-- Subscriptions -->
    <div class="reveal">
      <div class="text-center mb-8">
        <h3 class="font-display font-bold text-2xl text-white mb-2">Servicios Mensuales</h3>
        <p class="text-slate-400 text-sm">Se contratan junto al plan de implementación</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto">
        {subscriptions.map(sub => (
          <div class="glass-card glow-border p-6 flex flex-col gap-4 hover:bg-dark-600/60 transition-all duration-300">
            <div class="flex items-start justify-between gap-4">
              <div>
                <div class="flex items-center gap-2 mb-1">
                  <h4 class="font-display font-bold text-lg text-white">{sub.name}</h4>
                  {sub.required && (
                    <span class="px-2 py-0.5 rounded-full text-xs font-semibold bg-amber-500/10 text-amber-400 border border-amber-500/20">
                      Requerido
                    </span>
                  )}
                  {!sub.required && (
                    <span class="px-2 py-0.5 rounded-full text-xs font-semibold bg-emerald-500/10 text-emerald-400 border border-emerald-500/20">
                      Opcional
                    </span>
                  )}
                </div>
                <p class="text-slate-400 text-sm">{sub.desc}</p>
              </div>
              <div class="text-right flex-shrink-0">
                <span class="font-display font-black text-2xl text-white">USD {sub.price}</span>
                <span class="text-slate-400 text-xs block">/{sub.period}</span>
              </div>
            </div>
            <a
              href={sub.link}
              target="_blank"
              rel="noopener"
              class="w-full text-center py-2.5 px-4 rounded-xl font-semibold text-sm border border-primary/40 text-primary-light hover:bg-primary/10 hover:border-primary transition-all duration-300"
            >
              Activar suscripción
            </a>
          </div>
        ))}
      </div>
    </div>

    <!-- Note -->
    <p class="reveal text-center text-slate-500 text-sm mt-10">
      ¿No sabés qué plan necesitás? Hablá con María en el chat o escribinos por WhatsApp.
    </p>

  </div>
</section>
